var popup=document.querySelector(".popup"),buttonOpenedPopup=document.querySelector(".contacts__button"),buttonClosedPopup=popup.querySelector(".popup__button-close"),form=popup.querySelector(".popup__form"),inputForm=form.querySelectorAll(".popup__input"),inputEnterName=form.querySelector("#my-name"),inputEnterEmail=form.querySelector("#email"),inputEnterComment=form.querySelector("#comment"),isStorageSupport=!0,storageSelf="",storagePost="";try{storageSelf=localStorage.getItem("inputEnterName"),storagePost=localStorage.getItem("inputEnterEmail")}catch(e){isStorageSupport=!1}var onPopupEscPress=function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("popup--show")&&closePopup())},onPopupButtonOpened=function(e){e.preventDefault(),openPopup(),storageSelf?(inputEnterName.value=storageSelf,inputEnterEmail.focus()):inputEnterName.focus(),storagePost?(inputEnterEmail.value=storagePost,inputEnterComment.focus()):inputEnterEmail.focus()},onPopupButtonClosed=function(e){e.preventDefault(),closePopup()},openPopup=function(){popup.classList.add("popup--show"),inputEnterName.focus(),document.addEventListener("keydown",onPopupEscPress)},closePopup=function(){popup.classList.remove("popup--show"),popup.classList.remove("popup--error"),inputForm.classList.remove("popup__input--error"),document.removeEventListener("keydown",onPopupEscPress)};buttonOpenedPopup.addEventListener("click",onPopupButtonOpened),buttonClosedPopup.addEventListener("click",onPopupButtonClosed),buttonClosedPopup.addEventListener("keydown",function(e){13===e.keyCode&&onPopupButtonClosed()}),buttonOpenedPopup.addEventListener("keydown",function(e){13===e.keyCode&&onPopupButtonOpened()}),form.addEventListener("submit",function(e){inputEnterName.value?inputEnterName.classList.remove("popup__input--error"):inputEnterName.classList.add("popup__input--error"),inputEnterEmail.value?inputEnterEmail.classList.remove("popup__input--error"):inputEnterEmail.classList.add("popup__input--error"),inputEnterComment.value||"В свободной форме"===inputEnterComment.value?inputEnterComment.classList.remove("popup__input--error"):inputEnterComment.classList.add("popup__input--error"),inputEnterName.value&&inputEnterEmail.value&&(inputEnterComment.value||"В свободной форме"===inputEnterComment.value)?isStorageSupport&&(localStorage.setItem("inputEnterName",inputEnterName.value),localStorage.setItem("inputEnterEmail",inputEnterEmail.value)):(e.preventDefault(),console.log(" Заполните все поля формы перед отправкой!"),popup.classList.remove("popup--error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup--error"))});
