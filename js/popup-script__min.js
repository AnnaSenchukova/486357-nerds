var popup=document.querySelector(".popup"),buttonOpenedPopup=document.querySelector(".contacts__button"),buttonClosedPopup=popup.querySelector(".popup__button-close"),form=popup.querySelector(".popup__form"),inputForm=form.querySelectorAll(".popup__input"),inputEnterName=form.querySelector("[name=my-name]"),inputEnterEmail=form.querySelector("[name=email]"),inputEnterComment=form.querySelector("[name=comment]"),isStorageSupport=!0,storageSelf="",storagePost="";try{storageSelf=localStorage.getItem("self"),storagePost=localStorage.getItem("post")}catch(e){isStorageSupport=!1}var onPopupEscPress=function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("popup--show")&&closePopup())},onPopupButtonOpened=function(e){e.preventDefault(),openPopup()},onPopupButtonClosed=function(e){e.preventDefault(),closePopup()},openPopup=function(){popup.classList.add("popup--show"),document.addEventListener("keydown",onPopupEscPress)},closePopup=function(){popup.classList.remove("popup--show"),popup.classList.remove("popup--error"),inputForm.classList.remove("popup__input--error"),document.removeEventListener("keydown",onPopupEscPress)};buttonOpenedPopup.addEventListener("click",onPopupButtonOpened),buttonClosedPopup.addEventListener("click",onPopupButtonClosed),buttonClosedPopup.addEventListener("keydown",function(e){13===e.keyCode&&onPopupButtonClosed()}),buttonOpenedPopup.addEventListener("keydown",function(e){13===e.keyCode&&onPopupButtonOpened()}),form.addEventListener("submit",function(e){inputEnterName.value?inputEnterName.classList.remove("popup__input--error"):(e.preventDefault(),inputEnterName.classList.add("popup__input--error")),inputEnterEmail.value?inputEnterEmail.classList.remove("popup__input--error"):(e.preventDefault(),inputEnterEmail.classList.add("popup__input--error")),inputEnterComment.value||"В свободной форме"===inputEnterComment.value?inputEnterComment.classList.remove("popup__input--error"):(e.preventDefault(),inputEnterComment.classList.add("popup__input--error")),inputEnterName.value&&inputEnterEmail.value&&(inputEnterComment.value||"В свободной форме"===inputEnterComment.value)?isStorageSupport&&(localStorage.setItem("self",inputEnterName.value),localStorage.setItem("post",inputEnterEmail.value)):(e.preventDefault(),console.log(" Заполните все поля формы перед отправкой!"),popup.classList.remove("popup--error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup--error"))});
